<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Plainhouse</title>
  <link rel="stylesheet" href="style.css" />
  <script>
    function toggleDarkMode() {
      document.body.classList.toggle('dark');
    }

    function openTab(tabName) {
      const tabs = document.querySelectorAll(".tab-content");
      tabs.forEach(tab => tab.style.display = "none");
      document.getElementById(tabName).style.display = "block";
    }

    // Function to refresh Spotify widget to ensure "Current Song" is accurate
    function refreshSpotify() {
      const spotifyFrame = document.getElementById('spotify-widget');
      if (spotifyFrame) {
        // Reloads the iframe src to fetch the latest song
        spotifyFrame.src = spotifyFrame.src;
      }
    }

    window.onload = () => {
      openTab("twitch"); // default tab
      // Auto-update music widget every 30 seconds
      setInterval(refreshSpotify, 30000); 
    };
  </script>
</head>
<body class="dark">
  <div class="background-glow"></div>

  <header>
    <img src="banner.png" alt="Plainhouse banner" class="banner" id="banner" />
    <button onclick="toggleDarkMode()" class="toggle-button">Toggle Theme</button>
  </header>

  <nav class="tab-bar">
    <button onclick="openTab('twitch')">ðŸŽ® Twitch</button>
    <button onclick="openTab('youtube')">ðŸ“º YouTube</button>
    <button onclick="openTab('discord')">ðŸ’¬ Discord</button>
    <button onclick="openTab('spotify')">ðŸŽ§ Spotify</button>
    <button onclick="openTab('apps')">ðŸš€ Apps</button>
  </nav>

  <main>
    <section id="twitch" class="tab-content">
      <h2>ðŸŽ® Watch Live</h2>
      <iframe src="https://player.twitch.tv/?channel=plainhouse&parent=yourdomain.com" allowfullscreen></iframe>
      <h3>ðŸ’¬ Twitch Chat</h3>
      <iframe src="https://www.twitch.tv/embed/plainhouse/chat?parent=yourdomain.com"></iframe>
    </section>

    <section id="youtube" class="tab-content">
      <h2>ðŸ“º Latest YouTube Videos</h2>
      <iframe src="https://www.youtube.com/embed?listType=user_uploads&list=plainhouse126"></iframe>
      <a class="button" href="https://youtube.com/@plainhouse126" target="_blank">Go to YouTube Channel</a>
    </section>

    <section id="discord" class="tab-content">
      <h2>ðŸ’¬ Join Discord</h2>
      <a class="button" href="https://discord.gg/fz4fUt3bHh" target="_blank">Join Our Server</a>
    </section>

    <section id="spotify" class="tab-content">
      <h2>ðŸŽ§ Now Playing</h2>
      <p style="opacity: 0.7; font-size: 0.9rem; margin-bottom: 10px;">Updates automatically...</p>
      <iframe id="spotify-widget" src="https://spotify-now-playing-widget.vercel.app/api/now-playing?theme=dark" height="80"></iframe>
    </section>

    <section id="apps" class="tab-content">
      <h2>ðŸš€ My Apps</h2>
      <div class="app-grid">
        <div class="app-card">
          <h3>Anime Power Forge</h3>
          <p>Forge your power in this anime-inspired experience.</p>
          <a class="button app-btn" href="https://anime-power-forge.base44.app" target="_blank">Launch App</a>
        </div>
        <div class="app-card">
          <h3>Pixel Drop Play</h3>
          <p>Dive into the pixelated action.</p>
          <a class="button app-btn" href="https://pixel-drop-play.base44.app" target="_blank">Launch App</a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>Â© 2025 Plainhouse</p>
    <p class="easter-egg">Hint: Press <b>P</b> or try clicking around ðŸ˜‰</p>
    <img src="youtube.png" alt="YouTube" class="hidden-egg youtube-egg"
         onclick="window.open('https://youtube.com/@plainhouse126','_blank')">
    <img src="twitch.png" alt="Twitch" class="hidden-egg twitch-egg"
         onclick="window.open('https://twitch.tv/plainhouse','_blank')">
  </footer>

  <script>
    // Easter Egg - Press "P"
    document.addEventListener("keydown", e => {
      if (e.key.toLowerCase() === "p") {
        alert("ðŸŽ‰ Secret unlocked! Follow Plainhouse on Twitch & YouTube! ðŸŽ‰\nTwitch: twitch.tv/plainhouse\nYouTube: youtube.com/@plainhouse126");
      }
    });

    // Easter Egg - Double click banner
    document.getElementById("banner").addEventListener("dblclick", () => {
      alert("ðŸ”¥ Banner Secret Found! ðŸ”¥\nPlainhouse is everywhere... stay tuned!");
    });
  </script>
</body>
</html>
